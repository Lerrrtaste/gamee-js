<!DOCTYPE html>
<html>
<head>
  <title>controller.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../doc-style.css" />
  <script src="../doc-filelist.js"></script>
  <script>
    var relativeDir = "../", thisFile = "src/controller.js", defaultSidebar = true;
  </script>
  <script src="../doc-script.js"></script>
</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">
      <div class="heading h2">
        <a href="#bullet">Bullet</a>
      </div>
      <div class="heading h2">
        <a href="#gamee.controller">gamee.controller</a>
      </div>
      <div class="heading h3">
        <a href="#requestcontroller">requestController</a>
      </div>
      <div class="heading h3">
        <a href="#additionalcontroller">additionalController</a>
      </div>
      <div class="heading h3">
        <a href="#trigger">trigger</a>
      </div>
      <div class="heading h2">
        <a href="#button">Button</a>
      </div>
      <div class="heading h3">
        <a href="#isdown">isDown</a>
      </div>
      <div class="heading h2">
        <a href="#controller">Controller</a>
      </div>
      <div class="heading h3">
        <a href="#buttons">buttons</a>
      </div>
      <div class="heading h3">
        <a href="#buttonalias">buttonAlias</a>
      </div>
      <div class="heading h3">
        <a href="#addbutton">addButton</a>
      </div>
      <div class="heading h3">
        <a href="#enablekeyboard">enableKeyboard</a>
      </div>
      <div class="heading h3">
        <a href="#remapbutton">remapButton</a>
      </div>
      <div class="heading h2">
        <a href="#controllers">Controllers</a>
      </div>
      <div class="heading h3">
        <a href="#onebuttoncontroller">OneButtonController</a>
      </div>
      <div class="heading h3">
        <a href="#twobuttoncontroller">TwoButtonController</a>
      </div>
      <div class="heading h3">
        <a href="#fourbuttoncontroller">FourButtonController</a>
      </div>
      <div class="heading h3">
        <a href="#fivebuttoncontroller">FiveButtonController</a>
      </div>
      <div class="heading h3">
        <a href="#sixbuttoncontroller">SixButtonController</a>
      </div>
      <div class="heading h3">
        <a href="#fourarrowcontroller">FourArrowController</a>
      </div>
      <div class="heading h3">
        <a href="#touchcontroller">TouchController</a>
      </div>
      <div class="heading h3">
        <a href="#joystickcontroller">JoystickController</a>
      </div>
      <div class="heading h3">
        <a href="#joystickbuttoncontroller">JoystickButtonController</a>
      </div>
      <div class="heading h2">
        <a href="#private%20objects%20and%20methods">Private objects and methods</a>
      </div>
      <div class="heading h3">
        <a href="#createcontroller">createController</a>
      </div>
      <div class="heading h3">
        <a href="#maincontroller">mainController</a>
      </div>
      <div class="heading h3">
        <a href="#controllertypes">controllerTypes</a>
      </div>
    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container"><div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
      <tr>
        <td class="docs">
          <h1>controller.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1">&#182;</a>
</div>
<p>Controller for <code>gamee</code></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">global</span><span class="p">,</span> <span class="nx">gamee</span><span class="p">)</span> <span class="p">{</span>
  <span class="s1">&#39;use strict&#39;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="bullet">
  <h2>
    <a href="#bullet" name="bullet" class="pilcrow">&#182;</a>
    Bullet
  </h2>
</div>

  </div>
  <div class="body"><p><a href="https://github.com/munkychop/bullet">Bullet.js</a> is used as pub/sub
library. </p>

<p>The controller and its buttons are instance of Bullet.</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="kd">var</span> <span class="nx">BulletClass</span> <span class="o">=</span> <span class="nx">Bullet</span><span class="p">.</span><span class="nx">constructor</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="gamee.controller">
  <h2>
    <a href="#gamee.controller" name="gamee.controller" class="pilcrow">&#182;</a>
    gamee.controller
  </h2>
</div>


<p>Namespace where the methods for controller are published.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">gamee</span><span class="p">.</span><span class="nx">controller</span> <span class="o">=</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="requestcontroller">
  <h3>
    <a href="#requestcontroller" name="requestcontroller" class="pilcrow">&#182;</a>
    requestController
  </h3>
</div>

  </div>
  <div class="body"><p>Factory method to create a controller. It creates the controller
and signals to GameeApp which type the game requires</p>

<p>You should called this method once before calling
<code>gamee.gameStart()</code>.</p>
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">type</span>
      <span class="dox_type">String</span>
      <span>type of controller ('OneButton', 'TwoButtons',
'FourButtons', 'FiveButtons', 'SixButtons', 'Touch')</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">[opts]</span>
      <span class="dox_type">Object</span>
      <span>optional controller options 
{'enableKeyboard': .., 'buttons': ...}</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">[opts.enableKeyboard]</span>
      <span class="dox_type">boolean</span>
      <span>enable the keyboard</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">[opts.buttons]</span>
      <span class="dox_type">Object</span>
      <span>remap buttons {'oldKey': 'newKey', 
'left': 'break' ..}</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">requestController</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">opts</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">controller</span> <span class="o">=</span> <span class="nx">createController</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">opts</span><span class="p">);</span>

      <span class="nx">global</span><span class="p">.</span><span class="nx">$gameeNative</span><span class="p">.</span><span class="nx">requestController</span><span class="p">(</span><span class="nx">type</span><span class="p">);</span>
      <span class="nx">mainController</span> <span class="o">=</span> <span class="nx">controller</span><span class="p">;</span>
      
      <span class="k">return</span> <span class="nx">controller</span><span class="p">;</span>
    <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="additionalcontroller">
  <h3>
    <a href="#additionalcontroller" name="additionalcontroller" class="pilcrow">&#182;</a>
    additionalController
  </h3>
</div>

  </div>
  <div class="body"><p>Construct an additional controller. Sometimes games require a
different controller depending on platform (eg. touch on mobile, 
e but Four Buttons on desktop)</p>

<p><strong>This is currently supported only for GameeWebApp</strong> as a way to 
have alternate keybinding. The game should request a type used 
for mobile platform and then some other as <em>additionalController</em>
if alternate keybinding is needed;</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">additionalController</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">opts</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">controller</span> <span class="o">=</span> <span class="nx">createController</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">opts</span><span class="p">);</span>
      <span class="nx">global</span><span class="p">.</span><span class="nx">$gameeNative</span><span class="p">.</span><span class="nx">additionalController</span><span class="p">(</span><span class="nx">type</span><span class="p">);</span>

      <span class="k">return</span> <span class="nx">controller</span><span class="p">;</span>
    <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="trigger">
  <h3>
    <a href="#trigger" name="trigger" class="pilcrow">&#182;</a>
    trigger
  </h3>
</div>

  </div>
  <div class="body"><p>Triggers and event for the controller</p>

<p>This is called by GameeApp to trigger the <em>keydown</em>, <em>keyup</em>
events. For more info see <a href="#controller">Controller</a></p>
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">eventName</span>
      <span class="dox_type">String</span>
      <span>name of the event</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">[data,...]</span>
      <span class="dox_type">*</span>
      <span>data to pass for the event</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">trigger</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">i</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">mainController</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">mainController</span><span class="p">.</span><span class="nx">trigger</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">mainController</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span> 
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;No controller present&#39;</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">};</span>



</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="button">
  <h2>
    <a href="#button" name="button" class="pilcrow">&#182;</a>
    Button
  </h2>
</div>

  </div>
  <div class="body"><p>Represenation of a controller button. It is a child of 
<a href="https://github.com/munkychop/bullet">Bullet</a>, so you can
subscribe for events triggered on it. </p>
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">key</span>
      <span class="dox_type">String</span>
      <span>name of the button</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">keyCode</span>
      <span class="dox_type">Number</span>
      <span>keycode for the key to represent the button
on keyboard</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="kd">function</span> <span class="nx">Button</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">keyCode</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

    <span class="nx">BulletClass</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">_pressed</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">key</span> <span class="o">=</span> <span class="nx">key</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">=</span> <span class="nx">keyCode</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;keydown&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">self</span><span class="p">.</span><span class="nx">_pressed</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">});</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;keyup&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">self</span><span class="p">.</span><span class="nx">_pressed</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">Button</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">BulletClass</span><span class="p">.</span><span class="nx">constructor</span><span class="p">.</span><span class="nx">prototype</span><span class="p">);</span>
  <span class="nx">Button</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">Button</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="isdown">
  <h3>
    <a href="#isdown" name="isdown" class="pilcrow">&#182;</a>
    isDown
  </h3>
</div>

  </div>
  <div class="body"><p>Ask if the button is currently pressed.</p>
  </div>
  <div class="details">
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Boolean</span>
      <span>true if the button is currently pressed</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">Button</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">isDown</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_pressed</span><span class="p">;</span>
  <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="controller">
  <h2>
    <a href="#controller" name="controller" class="pilcrow">&#182;</a>
    Controller
  </h2>
</div>

  </div>
  <div class="body"><p>Controller has a collection of <a href="#buttons">buttons</a>.
It is a child of 
<a href="https://github.com/munkychop/bullet">Bullet</a>, so you can 
subscribe for events triggered on it. </p>

<p>Controllers will get all the events for its buttons so you can
listen for them globaly from controller or individualy on every
button.</p>


<div class="highlight"><pre><code><span class="nx">controller</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;keydown&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;button &#39;</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">button</span> <span class="o">+</span> <span class="s1">&#39; is pressed&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">controller</span><span class="p">.</span><span class="nx">buttons</span><span class="p">.</span><span class="nx">left</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;keydown&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;button left is pressed&#39;</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>


  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="kd">function</span> <span class="nx">Controller</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

    <span class="nx">BulletClass</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="buttons">
  <h3>
    <a href="#buttons" name="buttons" class="pilcrow">&#182;</a>
    buttons
  </h3>
</div>


<p>Map of controller's <a href="#button">buttons</a> by their name.</p>


<div class="highlight"><pre><code><span class="nx">controller</span><span class="p">.</span><span class="nx">buttons</span><span class="p">.</span><span class="nx">left</span> <span class="c1">// Button(&#39;left&#39;, ..)</span>
</code></pre></div>


        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">buttons</span> <span class="o">=</span> <span class="p">{};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="buttonalias">
  <h3>
    <a href="#buttonalias" name="buttonalias" class="pilcrow">&#182;</a>
    buttonAlias
  </h3>
</div>


<p>Map of remapped buttons.</p>

<p><em>see <a href="#remapbutton">remapButton</a> for more info</em></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">buttonAlias</span> <span class="o">=</span> <span class="p">{};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-12" id="section-12">&#182;</a>
</div>
<p>Events prefixed with <em>$</em> are private, sent from GameeApp ment
to be handled before resended as <em>public (non-prefixed)</em> 
event.</p>

<p>They should be not used in games as they can change in the future.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;$keydown&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">button</span> <span class="o">&amp;&amp;</span> <span class="nx">self</span><span class="p">.</span><span class="nx">buttonAlias</span><span class="p">[</span><span class="nx">data</span><span class="p">.</span><span class="nx">button</span><span class="p">])</span> <span class="p">{</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">button</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">buttonAlias</span><span class="p">[</span><span class="nx">data</span><span class="p">.</span><span class="nx">button</span><span class="p">];</span>
      <span class="p">}</span>

      <span class="nx">self</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;keydown&#39;</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;$keyup&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">button</span> <span class="o">&amp;&amp;</span> <span class="nx">self</span><span class="p">.</span><span class="nx">buttonAlias</span><span class="p">[</span><span class="nx">data</span><span class="p">.</span><span class="nx">button</span><span class="p">])</span> <span class="p">{</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">button</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">buttonAlias</span><span class="p">[</span><span class="nx">data</span><span class="p">.</span><span class="nx">button</span><span class="p">];</span>
      <span class="p">}</span>

      <span class="nx">self</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;keyup&#39;</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
    <span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-13" id="section-13">&#182;</a>
</div>
<p>By default GameeApp will trigger <em>keydown</em> and <em>keyup</em> events for
the controller for every button presses/released.</p>

<p>The controller then handles the event and triggers the event for
the coresponding button.</p>

<p>It expexts a <code>data</code> argument which should have a property <code>button</code>
with the name of button.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;keydown&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">button</span> <span class="o">||</span> <span class="o">!</span><span class="nx">self</span><span class="p">.</span><span class="nx">buttons</span><span class="p">[</span><span class="nx">data</span><span class="p">.</span><span class="nx">button</span><span class="p">])</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">self</span><span class="p">.</span><span class="nx">buttons</span><span class="p">[</span><span class="nx">data</span><span class="p">.</span><span class="nx">button</span><span class="p">].</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;keydown&#39;</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;keyup&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">button</span> <span class="o">||</span> <span class="o">!</span><span class="nx">self</span><span class="p">.</span><span class="nx">buttons</span><span class="p">[</span><span class="nx">data</span><span class="p">.</span><span class="nx">button</span><span class="p">])</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">self</span><span class="p">.</span><span class="nx">buttons</span><span class="p">[</span><span class="nx">data</span><span class="p">.</span><span class="nx">button</span><span class="p">].</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;keyup&#39;</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">Controller</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">BulletClass</span><span class="p">.</span><span class="nx">constructor</span><span class="p">.</span><span class="nx">prototype</span><span class="p">);</span>
  <span class="nx">Controller</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">Controller</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="addbutton">
  <h3>
    <a href="#addbutton" name="addbutton" class="pilcrow">&#182;</a>
    addButton
  </h3>
</div>

  </div>
  <div class="body"><p>Add button to the controller.</p>
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">button</span>
      <span class="dox_type">Button</span>
      <span>a <a href="#button">Button</a> instance</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">Controller</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addButton</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">button</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">buttons</span><span class="p">[</span><span class="nx">button</span><span class="p">.</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">button</span><span class="p">;</span>
  <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="enablekeyboard">
  <h3>
    <a href="#enablekeyboard" name="enablekeyboard" class="pilcrow">&#182;</a>
    enableKeyboard
  </h3>
</div>

  </div>
  <div class="body"><p>Enable keyboard controlls. It will attach event listeners to the 
<em>window</em> object for every button and trigger their <em>keydown</em> /
<em>keyup</em> event for the controller.</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">Controller</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">enableKeyboard</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">button</span><span class="p">,</span> <span class="nx">keyCodes</span> <span class="o">=</span> <span class="p">{},</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="nx">key</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">buttons</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">button</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">buttons</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">button</span><span class="p">.</span><span class="nx">keyCode</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">keyCodes</span><span class="p">[</span><span class="nx">button</span><span class="p">.</span><span class="nx">keyCode</span><span class="p">]</span> <span class="o">=</span> <span class="nx">button</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">gamee</span><span class="p">.</span><span class="nx">_keydown</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">ev</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">button</span> <span class="o">=</span> <span class="nx">keyCodes</span><span class="p">[</span><span class="nx">ev</span><span class="p">.</span><span class="nx">keyCode</span><span class="p">];</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">button</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">ev</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
      <span class="nx">self</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;keydown&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">button</span><span class="o">:</span> <span class="nx">button</span><span class="p">.</span><span class="nx">key</span><span class="p">});</span>
    <span class="p">});</span>
    
    <span class="nx">gamee</span><span class="p">.</span><span class="nx">_keyup</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">ev</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">button</span> <span class="o">=</span> <span class="nx">keyCodes</span><span class="p">[</span><span class="nx">ev</span><span class="p">.</span><span class="nx">keyCode</span><span class="p">];</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">button</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">ev</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
      <span class="nx">self</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;keyup&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">button</span><span class="o">:</span> <span class="nx">button</span><span class="p">.</span><span class="nx">key</span><span class="p">});</span>
    <span class="p">});</span>
  <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="remapbutton">
  <h3>
    <a href="#remapbutton" name="remapbutton" class="pilcrow">&#182;</a>
    remapButton
  </h3>
</div>

  </div>
  <div class="body"><p>Remap the names of the controller's buttons. Controllers have their
button names set (left, right, A, B), but sometimes in context of 
the game a different names are desired.</p>


<div class="highlight"><pre><code><span class="kd">var</span> <span class="nx">controller</span> <span class="o">=</span> <span class="nx">gamee</span><span class="p">.</span><span class="nx">controller</span><span class="p">.</span><span class="nx">requestController</span><span class="p">(</span><span class="s1">&#39;TwoButtons&#39;</span><span class="p">);</span>
<span class="nx">controller</span><span class="p">.</span><span class="nx">remapButton</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;throttle&#39;</span><span class="p">);</span>
<span class="nx">controller</span><span class="p">.</span><span class="nx">remapButton</span><span class="p">(</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="s1">&#39;break&#39;</span><span class="p">);</span>

<span class="nx">controller</span><span class="p">.</span><span class="nx">buttons</span><span class="p">.</span><span class="nx">throttle</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;keydown&#39;</span><span class="p">,</span> <span class="p">..);</span>
</code></pre></div>


  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">oldName</span>
      <span class="dox_type">String</span>
      <span>button name we want to change</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">newName</span>
      <span class="dox_type">String</span>
      <span>new button name</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">Controller</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">remapButton</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">oldName</span><span class="p">,</span> <span class="nx">newName</span><span class="p">)</span> <span class="p">{</span>
    

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-17" id="section-17">&#182;</a>
</div>
<p>handle old code</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span><span class="nx">newName</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">newName</span> <span class="o">=</span> <span class="nx">newName</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">buttons</span><span class="p">[</span><span class="nx">oldName</span><span class="p">])</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">buttonAlias</span><span class="p">[</span><span class="nx">oldName</span><span class="p">]</span> <span class="o">=</span> <span class="nx">newName</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
      
      <span class="k">this</span><span class="p">.</span><span class="nx">buttons</span><span class="p">[</span><span class="nx">newName</span><span class="p">.</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">buttons</span><span class="p">[</span><span class="nx">oldName</span><span class="p">];</span>

      <span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">buttons</span><span class="p">[</span><span class="nx">oldName</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">throw</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;Button &#39;</span> <span class="o">+</span> <span class="nx">oldName</span> <span class="o">+</span> <span class="s1">&#39; was not found in controller&#39;</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="controllers">
  <h2>
    <a href="#controllers" name="controllers" class="pilcrow">&#182;</a>
    Controllers
  </h2>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="onebuttoncontroller">
  <h3>
    <a href="#onebuttoncontroller" name="onebuttoncontroller" class="pilcrow">&#182;</a>
    OneButtonController
  </h3>
</div>

  </div>
  <div class="body"><p>Controller with only one button.</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="kd">function</span> <span class="nx">OneButtonController</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">Controller</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-20" id="section-20">&#182;</a>
</div>
<ul>
<li><strong>name</strong>: 'button' </li>
<li><strong>key</strong>: spacebar</li>
</ul>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">addButton</span><span class="p">(</span><span class="k">new</span> <span class="nx">Button</span><span class="p">(</span><span class="s1">&#39;button&#39;</span><span class="p">,</span> <span class="mi">32</span><span class="p">));</span> 
  <span class="p">}</span>
  <span class="nx">OneButtonController</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">Controller</span><span class="p">.</span><span class="nx">prototype</span><span class="p">);</span>
  <span class="nx">OneButtonController</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">OneButtonController</span><span class="p">;</span>



</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="twobuttoncontroller">
  <h3>
    <a href="#twobuttoncontroller" name="twobuttoncontroller" class="pilcrow">&#182;</a>
    TwoButtonController
  </h3>
</div>

  </div>
  <div class="body"><p>Controller with two buttons</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="kd">function</span> <span class="nx">TwoButtonController</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">Controller</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-22" id="section-22">&#182;</a>
</div>
<ul>
<li><strong>name</strong>: 'left'</li>
<li><strong>key</strong>: left arrow</li>
</ul>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">addButton</span><span class="p">(</span><span class="k">new</span> <span class="nx">Button</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="mi">37</span><span class="p">));</span> 


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-23" id="section-23">&#182;</a>
</div>
<ul>
<li><strong>name</strong>: 'right'</li>
<li><strong>key</strong>: righ arrow</li>
</ul>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">addButton</span><span class="p">(</span><span class="k">new</span> <span class="nx">Button</span><span class="p">(</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="mi">39</span><span class="p">));</span>
  <span class="p">}</span>
  <span class="nx">TwoButtonController</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">Controller</span><span class="p">.</span><span class="nx">prototype</span><span class="p">);</span>
  <span class="nx">TwoButtonController</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">TwoButtonController</span><span class="p">;</span>



</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="fourbuttoncontroller">
  <h3>
    <a href="#fourbuttoncontroller" name="fourbuttoncontroller" class="pilcrow">&#182;</a>
    FourButtonController
  </h3>
</div>

  </div>
  <div class="body"><p>Controller with four buttons</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="kd">function</span> <span class="nx">FourButtonController</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">Controller</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-25" id="section-25">&#182;</a>
</div>
<ul>
<li><strong>name</strong>: 'up'</li>
<li><strong>key</strong>: left arrow</li>
</ul>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">addButton</span><span class="p">(</span><span class="k">new</span> <span class="nx">Button</span><span class="p">(</span><span class="s1">&#39;up&#39;</span><span class="p">,</span> <span class="mi">38</span><span class="p">));</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-26" id="section-26">&#182;</a>
</div>
<ul>
<li><strong>name</strong>: 'left'</li>
<li><strong>key</strong>: left arrow</li>
</ul>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">addButton</span><span class="p">(</span><span class="k">new</span> <span class="nx">Button</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="mi">37</span><span class="p">));</span>  

    

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-27" id="section-27">&#182;</a>
</div>
<ul>
<li><strong>name</strong>: 'right'</li>
<li><strong>key</strong>: righ arrow</li>
</ul>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">addButton</span><span class="p">(</span><span class="k">new</span> <span class="nx">Button</span><span class="p">(</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="mi">39</span><span class="p">));</span> 


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-28" id="section-28">&#182;</a>
</div>
<ul>
<li><strong>name</strong>: 'A'</li>
<li><strong>key</strong>: spacebar</li>
</ul>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">addButton</span><span class="p">(</span><span class="k">new</span> <span class="nx">Button</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="mi">32</span><span class="p">));</span>     
  <span class="p">}</span>
  <span class="nx">FourButtonController</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">Controller</span><span class="p">.</span><span class="nx">prototype</span><span class="p">);</span>
  <span class="nx">FourButtonController</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">FourButtonController</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="fivebuttoncontroller">
  <h3>
    <a href="#fivebuttoncontroller" name="fivebuttoncontroller" class="pilcrow">&#182;</a>
    FiveButtonController
  </h3>
</div>

  </div>
  <div class="body"><p>Controller with five buttons</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="kd">function</span> <span class="nx">FiveButtonController</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">Controller</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-30" id="section-30">&#182;</a>
</div>
<ul>
<li><strong>name</strong>: 'up'</li>
<li><strong>key</strong>: left arrow</li>
</ul>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">addButton</span><span class="p">(</span><span class="k">new</span> <span class="nx">Button</span><span class="p">(</span><span class="s1">&#39;up&#39;</span><span class="p">,</span> <span class="mi">38</span><span class="p">));</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-31" id="section-31">&#182;</a>
</div>
<ul>
<li><strong>name</strong>: 'left'</li>
<li><strong>key</strong>: left arrow</li>
</ul>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">addButton</span><span class="p">(</span><span class="k">new</span> <span class="nx">Button</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="mi">37</span><span class="p">));</span>  

    

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-32" id="section-32">&#182;</a>
</div>
<ul>
<li><strong>name</strong>: 'right'</li>
<li><strong>key</strong>: righ arrow</li>
</ul>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">addButton</span><span class="p">(</span><span class="k">new</span> <span class="nx">Button</span><span class="p">(</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="mi">39</span><span class="p">));</span> 


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-33" id="section-33">&#182;</a>
</div>
<ul>
<li><strong>name</strong>: 'down'</li>
<li><strong>key</strong>: down arrow</li>
</ul>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">addButton</span><span class="p">(</span><span class="k">new</span> <span class="nx">Button</span><span class="p">(</span><span class="s1">&#39;down&#39;</span><span class="p">,</span> <span class="mi">40</span><span class="p">));</span>  


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-34" id="section-34">&#182;</a>
</div>
<ul>
<li><strong>name</strong>: 'A'</li>
<li><strong>key</strong>: spacebar</li>
</ul>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">addButton</span><span class="p">(</span><span class="k">new</span> <span class="nx">Button</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="mi">32</span><span class="p">));</span>     
  <span class="p">}</span>
  <span class="nx">FiveButtonController</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">Controller</span><span class="p">.</span><span class="nx">prototype</span><span class="p">);</span>
  <span class="nx">FiveButtonController</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">FiveButtonController</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="sixbuttoncontroller">
  <h3>
    <a href="#sixbuttoncontroller" name="sixbuttoncontroller" class="pilcrow">&#182;</a>
    SixButtonController
  </h3>
</div>

  </div>
  <div class="body"><p>Controller with six buttons</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="kd">function</span> <span class="nx">SixButtonController</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">Controller</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-36" id="section-36">&#182;</a>
</div>
<ul>
<li><strong>name</strong>: 'up'</li>
<li><strong>key</strong>: left arrow</li>
</ul>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">addButton</span><span class="p">(</span><span class="k">new</span> <span class="nx">Button</span><span class="p">(</span><span class="s1">&#39;up&#39;</span><span class="p">,</span> <span class="mi">38</span><span class="p">));</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-37" id="section-37">&#182;</a>
</div>
<ul>
<li><strong>name</strong>: 'left'</li>
<li><strong>key</strong>: left arrow</li>
</ul>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">addButton</span><span class="p">(</span><span class="k">new</span> <span class="nx">Button</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="mi">37</span><span class="p">));</span>  

    

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-38" id="section-38">&#182;</a>
</div>
<ul>
<li><strong>name</strong>: 'right'</li>
<li><strong>key</strong>: righ arrow</li>
</ul>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">addButton</span><span class="p">(</span><span class="k">new</span> <span class="nx">Button</span><span class="p">(</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="mi">39</span><span class="p">));</span> 


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-39" id="section-39">&#182;</a>
</div>
<ul>
<li><strong>name</strong>: 'down'</li>
<li><strong>key</strong>: down arrow</li>
</ul>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">addButton</span><span class="p">(</span><span class="k">new</span> <span class="nx">Button</span><span class="p">(</span><span class="s1">&#39;down&#39;</span><span class="p">,</span> <span class="mi">40</span><span class="p">));</span>  


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-40" id="section-40">&#182;</a>
</div>
<ul>
<li><strong>name</strong>: 'A'</li>
<li><strong>key</strong>: spacebar</li>
</ul>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">addButton</span><span class="p">(</span><span class="k">new</span> <span class="nx">Button</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="mi">32</span><span class="p">));</span>     


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-41" id="section-41">&#182;</a>
</div>
<ul>
<li><strong>name</strong>: 'B'</li>
<li><strong>key</strong>: ctrl</li>
</ul>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">addButton</span><span class="p">(</span><span class="k">new</span> <span class="nx">Button</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="mi">17</span><span class="p">));</span>
  <span class="p">}</span>
  <span class="nx">SixButtonController</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">Controller</span><span class="p">.</span><span class="nx">prototype</span><span class="p">);</span>
  <span class="nx">SixButtonController</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">SixButtonController</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="fourarrowcontroller">
  <h3>
    <a href="#fourarrowcontroller" name="fourarrowcontroller" class="pilcrow">&#182;</a>
    FourArrowController
  </h3>
</div>

  </div>
  <div class="body"><p>Controller with four arrow buttons</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="kd">function</span> <span class="nx">FourArrowController</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">Controller</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-43" id="section-43">&#182;</a>
</div>
<ul>
<li><strong>name</strong>: 'up'</li>
<li><strong>key</strong>: left arrow</li>
</ul>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">addButton</span><span class="p">(</span><span class="k">new</span> <span class="nx">Button</span><span class="p">(</span><span class="s1">&#39;up&#39;</span><span class="p">,</span> <span class="mi">38</span><span class="p">));</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-44" id="section-44">&#182;</a>
</div>
<ul>
<li><strong>name</strong>: 'left'</li>
<li><strong>key</strong>: left arrow</li>
</ul>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">addButton</span><span class="p">(</span><span class="k">new</span> <span class="nx">Button</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="mi">37</span><span class="p">));</span>  

    

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-45" id="section-45">&#182;</a>
</div>
<ul>
<li><strong>name</strong>: 'right'</li>
<li><strong>key</strong>: righ arrow</li>
</ul>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">addButton</span><span class="p">(</span><span class="k">new</span> <span class="nx">Button</span><span class="p">(</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="mi">39</span><span class="p">));</span> 


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-46" id="section-46">&#182;</a>
</div>
<ul>
<li><strong>name</strong>: 'down'</li>
<li><strong>key</strong>: down arrow</li>
</ul>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">addButton</span><span class="p">(</span><span class="k">new</span> <span class="nx">Button</span><span class="p">(</span><span class="s1">&#39;down&#39;</span><span class="p">,</span> <span class="mi">40</span><span class="p">));</span>  
  <span class="p">}</span>
  <span class="nx">FourArrowController</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">Controller</span><span class="p">.</span><span class="nx">prototype</span><span class="p">);</span>
  <span class="nx">FourArrowController</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">FourArrowController</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="touchcontroller">
  <h3>
    <a href="#touchcontroller" name="touchcontroller" class="pilcrow">&#182;</a>
    TouchController
  </h3>
</div>

  </div>
  <div class="body"><p>This controller has no buttons. Instead it has a touchpad which
triggers <em>touchstart</em>, <em>touchend</em>, <em>touchmove</em>, <em>touchcancel</em>,
<em>touchend</em> events (similar to 
<a href="https://developer.mozilla.org/en-US/docs/Web/API/TouchEvent#Touch_event_types">Touch event types</a>)</p>

<p>The position of the touch is in the <code>data.position</code> argument as a 
<em>x</em> and <em>y</em> with the values between [0, 0] for the left top corner
and [1, 1] for the bottom right corner ([0.5, 0.5] is the center).</p>


<div class="highlight"><pre><code><span class="nx">controller</span> <span class="o">=</span> <span class="nx">gamee</span><span class="p">.</span><span class="nx">controller</span><span class="p">.</span><span class="nx">requestController</span><span class="p">(</span><span class="s1">&#39;Touch&#39;</span><span class="p">);</span>

<span class="nx">controller</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;touchstart&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
 <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span> <span class="o">&lt;</span> <span class="mf">0.5</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span> <span class="o">&lt;</span> <span class="mf">0.5</span><span class="p">)</span> <span class="p">{</span>
   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;touch in the top left quadrant&#39;</span><span class="p">);</span>
 <span class="p">}</span>
<span class="p">})</span>
</code></pre></div>


  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="kd">function</span> <span class="nx">TouchController</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

    <span class="nx">Controller</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;$touchstart&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">self</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;touchstart&#39;</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;$touchend&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">self</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;touchend&#39;</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;$touchmove&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">self</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;touchmove&#39;</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;$touchleave&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">self</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;touchleave&#39;</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;$touchcancel&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">self</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;touchcancel&#39;</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">}</span>
  <span class="nx">TouchController</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">TouchController</span><span class="p">.</span><span class="nx">prototype</span><span class="p">);</span>
  <span class="nx">TouchController</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">TouchController</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="joystickcontroller">
  <h3>
    <a href="#joystickcontroller" name="joystickcontroller" class="pilcrow">&#182;</a>
    JoystickController
  </h3>
</div>

  </div>
  <div class="body"><p>JoystickController emits <code>change</code> event, after the position of the 
joystick is changed. </p>

<p>The position of the joystick is in the property <code>x</code> and <code>y</code>. The 
position on axis is between &lt;-1, 1> (for x -1 is max left 
position, 1 max right position). [0.0, 0.0] is the center.</p>


<div class="highlight"><pre><code><span class="nx">joystick</span> <span class="o">=</span> <span class="nx">gamee</span><span class="p">.</span><span class="nx">controller</span><span class="p">.</span><span class="nx">requestController</span><span class="p">(</span><span class="s1">&#39;Joystick&#39;</span><span class="p">);</span>

<span class="nx">joystick</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;change&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">new_x</span> <span class="o">=</span> <span class="nx">joystick</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
  <span class="nx">nex_y</span> <span class="o">=</span> <span class="nx">joystick</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
<span class="p">})</span>
</code></pre></div>


  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="kd">function</span> <span class="nx">JoystickController</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

    <span class="nx">Controller</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-49" id="section-49">&#182;</a>
</div>
<p>x axis</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-50" id="section-50">&#182;</a>
</div>
<p>y axis</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;$change&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">self</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
      <span class="nx">self</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>

      <span class="nx">self</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;change&quot;</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">}</span>
  <span class="nx">JoystickController</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">Controller</span><span class="p">.</span><span class="nx">prototype</span><span class="p">);</span>
  <span class="nx">JoystickController</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">JoystickController</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="joystickbuttoncontroller">
  <h3>
    <a href="#joystickbuttoncontroller" name="joystickbuttoncontroller" class="pilcrow">&#182;</a>
    JoystickButtonController
  </h3>
</div>

  </div>
  <div class="body"><p>JoystickButtonController is a <code>JoystickController</code> with one button.</p>


<div class="highlight"><pre><code><span class="nx">joystick</span> <span class="o">=</span> <span class="nx">gamee</span><span class="p">.</span><span class="nx">controller</span><span class="p">.</span><span class="nx">requestController</span><span class="p">(</span><span class="s1">&#39;JoystickWithButton&#39;</span><span class="p">);</span>

<span class="nx">joystick</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;change&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">new_x</span> <span class="o">=</span> <span class="nx">joystick</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
  <span class="nx">nex_y</span> <span class="o">=</span> <span class="nx">joystick</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
<span class="p">})</span>

<span class="nx">joystick</span><span class="p">.</span><span class="nx">buttons</span><span class="p">.</span><span class="nx">button</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;keydown&#39;</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span>
<span class="c1">// or simply</span>
<span class="nx">joystick</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;keydown&#39;</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span>
</code></pre></div>


  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="kd">function</span> <span class="nx">JoystickButtonController</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

    <span class="nx">JoystickController</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-52" id="section-52">&#182;</a>
</div>
<ul>
<li><strong>name</strong>: 'button' </li>
<li><strong>key</strong>: spacebar</li>
</ul>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">addButton</span><span class="p">(</span><span class="k">new</span> <span class="nx">Button</span><span class="p">(</span><span class="s1">&#39;button&#39;</span><span class="p">,</span> <span class="mi">32</span><span class="p">));</span> 
  <span class="p">}</span>
  <span class="nx">JoystickButtonController</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">JoystickController</span><span class="p">.</span><span class="nx">prototype</span><span class="p">);</span>
  <span class="nx">JoystickButtonController</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">JoystickButtonController</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="private%20objects%20and%20methods">
  <h2>
    <a href="#private%20objects%20and%20methods" name="private%20objects%20and%20methods" class="pilcrow">&#182;</a>
    Private objects and methods
  </h2>
</div>


<p>These are internal objects in closed scope. Good to know about them
when debugging.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>



</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="createcontroller">
  <h3>
    <a href="#createcontroller" name="createcontroller" class="pilcrow">&#182;</a>
    createController
  </h3>
</div>

  </div>
  <div class="body"><p>Function to create a controller.</p>

<p>*see <a href="#requestcontroller">requestController</a></p>
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">type</span>
      <span class="dox_type">String</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">[opts]</span>
      <span class="dox_type">Object</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Controller</span>
      <span>controller</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="kd">function</span> <span class="nx">createController</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">opts</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">btn</span><span class="p">,</span> <span class="nx">controller</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">controllerTypes</span><span class="p">[</span><span class="nx">type</span><span class="p">])</span> <span class="p">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;Unsupported controller type, &#39;</span> <span class="o">+</span> <span class="nx">type</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">opts</span> <span class="o">=</span> <span class="nx">opts</span> <span class="o">||</span> <span class="p">{};</span>

    <span class="nx">controller</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">controllerTypes</span><span class="p">[</span><span class="nx">type</span><span class="p">]();</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">opts</span><span class="p">.</span><span class="nx">enableKeyboard</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">controller</span><span class="p">.</span><span class="nx">enableKeyboard</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">opts</span><span class="p">.</span><span class="nx">buttons</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span><span class="nx">btn</span> <span class="k">in</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">buttons</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">controller</span><span class="p">.</span><span class="nx">remapButton</span><span class="p">(</span><span class="nx">btn</span><span class="p">,</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">buttons</span><span class="p">[</span><span class="nx">btn</span><span class="p">]);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">controller</span><span class="p">;</span>
  <span class="p">}</span>



</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="maincontroller">
  <h3>
    <a href="#maincontroller" name="maincontroller" class="pilcrow">&#182;</a>
    mainController
  </h3>
</div>

  </div>
  <div class="body"><p>Current controller.</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="kd">var</span> <span class="nx">mainController</span><span class="p">;</span> 


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="controllertypes">
  <h3>
    <a href="#controllertypes" name="controllertypes" class="pilcrow">&#182;</a>
    controllerTypes
  </h3>
</div>

  </div>
  <div class="body"><p>List of controller types and their coresponding classes.</p>

<p><em>see <a href="#controllers">Controllers</a> for more info</em></p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="kd">var</span> <span class="nx">controllerTypes</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;OneButton&#39;</span><span class="o">:</span> <span class="nx">OneButtonController</span><span class="p">,</span>
    <span class="s1">&#39;TwoButtons&#39;</span><span class="o">:</span> <span class="nx">TwoButtonController</span><span class="p">,</span>
    <span class="s1">&#39;FourButtons&#39;</span><span class="o">:</span> <span class="nx">FourButtonController</span><span class="p">,</span>
    <span class="s1">&#39;FiveButtons&#39;</span><span class="o">:</span> <span class="nx">FiveButtonController</span><span class="p">,</span>
    <span class="s1">&#39;SixButtons&#39;</span><span class="o">:</span> <span class="nx">SixButtonController</span><span class="p">,</span>
    <span class="s1">&#39;FourArrows&#39;</span><span class="o">:</span> <span class="nx">FourArrowController</span><span class="p">,</span>
    <span class="s1">&#39;Touch&#39;</span><span class="o">:</span> <span class="nx">TouchController</span><span class="p">,</span>
    <span class="s1">&#39;Joystick&#39;</span><span class="o">:</span> <span class="nx">JoystickController</span><span class="p">,</span>
    <span class="s1">&#39;JoystickWithButton&#39;</span><span class="o">:</span> <span class="nx">JoystickButtonController</span>
  <span class="p">};</span>
<span class="p">}(</span><span class="k">this</span><span class="p">,</span> <span class="nx">gamee</span><span class="p">));</span>
</pre></div>
        </td>
      </tr>
  </tbody>
</table>
  </div>
</body>
</html>
